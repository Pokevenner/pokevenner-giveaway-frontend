<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pokevenner Mystery ‚Äì Pok√©ball-trekning</title>
<style>
  :root{
    --panel:#0f1115; --panelBorder:#1b1f2a; --muted:#9aa4b2;
    --grey:#ffffff; --green:#34a853; --blue:#4285f4; --gold:#fbbc05; --purple:#a142f4;
    --land-x: 50%; --land-y: 90%;
  }

  html,body{
    height:100%;margin:0;
    background:#000;
    font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    color:#fff;
    overflow:hidden;
  }

  .wrap{
    height:100vh;
    width:100vw;
  }

  /* Scenen med pok√©ballen */
  .stage{
    position:relative;
    overflow:hidden;
    background:#000;
    user-select:none;
    height:100%;
    width:100%;
  }
  .bg-img{
    position:absolute;inset:0;
    background:url('assets/background/forest.jpg') 50% 75% / cover no-repeat;
    filter:saturate(1.02) contrast(1.02);
  }
  .air{
    position:absolute;inset:0;
    mix-blend-mode:soft-light;
    pointer-events:none;
    background:radial-gradient(120% 40% at 50% 20%,rgba(255,255,255,.08),transparent 60%);
    animation:air 8s ease-in-out infinite;
  }
  @keyframes air{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-4px)}
  }

  .land-dot{
    position:absolute;
    left:var(--land-x);
    top:var(--land-y);
    transform:translate(-50%,-50%);
    width:12px;height:12px;
    border:2px solid #fff;
    border-radius:50%;
    box-shadow:0 0 12px #000;
    display:none;
    z-index:9;
  }

  .contact{
    position:absolute;
    left:var(--land-x);
    top:calc(var(--land-y) + 0.9%);
    transform:translate(-50%,-50%);
    width:32vmin;height:9vmin;
    border-radius:50%;
    filter:blur(8px);
    background:radial-gradient(closest-side,rgba(0,0,0,.48),transparent 74%);
    opacity:0;
    pointer-events:none;
  }

  .ball-wrap{
    position:absolute;
    left:0;top:0;
    transform:translate(-50%,-50%);
    will-change:transform;
    pointer-events:none;
    offset-rotate:auto;
    width:24vmin;height:24vmin;
  }
  .ball{
    position:relative;
    width:24vmin;height:24vmin;
    transform-style:preserve-3d;
    --open-top:-110deg;
    --open-bot:-8deg;
    --open-dur:560ms;
  }
  .ball img{
    position:absolute;inset:0;
    width:100%;height:100%;
    object-fit:contain;
  }
  .ball .top{clip-path:inset(0 0 50% 0);z-index:2}
  .ball .bottom{clip-path:inset(50% 0 0 0);z-index:1}
  .button-ring{z-index:4;filter:drop-shadow(0 0 .4vmin rgba(0,0,0,.5))}
  .button-core{z-index:5}
  .rarity-glow{
    position:absolute;
    inset:-8%;
    border-radius:50%;
    filter:blur(16px) saturate(1.4);
    opacity:0;
    pointer-events:none;
    z-index:0;
  }

  .ball.open .top{
    animation: lidTopSwing var(--open-dur) cubic-bezier(.17,.67,.28,1.2) forwards;
    transform-origin:50% 100%;
  }
  .ball.open .bottom{
    animation: lidBottomNod var(--open-dur) cubic-bezier(.17,.67,.28,1.2) forwards;
    transform-origin:50% 0%;
  }
  .ball.unlock .button-core{
    animation: btnPulse 420ms ease-out both;
  }
  @keyframes lidTopSwing{
    from{transform:rotateX(0)}
    to{transform:rotateX(var(--open-top)) translateZ(.01px)}
  }
  @keyframes lidBottomNod{
    from{transform:rotateX(0)}
    to{transform:rotateX(var(--open-bot)) translateZ(.01px)}
  }
  @keyframes btnPulse{
    0%{transform:scale(1)}
    40%{transform:scale(1.15)}
    100%{transform:scale(1)}
  }

  .prize-fly{
    position:absolute;
    width:14vmin;height:14vmin;
    left:0;top:0;
    transform:translate(-50%,-50%) scale(.2);
    opacity:0;
    object-fit:contain;
    filter:drop-shadow(0 1.2vmin 2.4vmin rgba(0,0,0,.6));
    pointer-events:none;
    z-index:8;
  }

  .flash{
    position:absolute;inset:0;
    background:#fff;
    opacity:0;
    pointer-events:none;
    z-index:7;
  }
  .flash.show{animation:flash .45s ease-out both}
  @keyframes flash{
    0%{opacity:0}
    15%{opacity:1}
    100%{opacity:0}
  }

  .particles{position:absolute;inset:0;pointer-events:none;z-index:6}
  .spark{
    position:absolute;
    width:1.2vmin;height:4vmin;
    background:#fff;
    opacity:.95;
    transform-origin:center bottom;
    border-radius:.3vmin;
    animation:spark 820ms ease-out forwards;
  }
  @keyframes spark{
    0%{transform:translate(0,0) scaleY(.2);opacity:1}
    100%{transform:translate(var(--x),var(--y)) scaleY(.85);opacity:0}
  }

  .confetti{
    position:absolute;
    width:.7vmin;height:2.2vmin;
    opacity:1;
    transform:translateY(-6vh) rotate(0deg);
    animation:conf 2000ms linear forwards;
  }
  @keyframes conf{
    0%{transform:translateY(-6vh) rotate(0deg)}
    100%{transform:translateY(106vh) rotate(380deg);opacity:0}
  }

  .beam{
    position:absolute;
    width:.5vmin;height:10vmin;
    border-radius:.25vmin;
    opacity:.85;
    transform-origin:bottom center;
    animation:beam 600ms ease-out forwards;
  }
  @keyframes beam{
    0%{opacity:0;transform:scaleY(.2)}
    50%{opacity:.95}
    100%{opacity:0;transform:scaleY(1)}
  }

  .reveal{
    position:absolute;
    left:55%;top:46%;
    transform:translate(-50%,-50%) scale(.92);
    display:flex;
    gap:20px;
    align-items:center;
    opacity:0;
    z-index:10;
  }
  .reveal.in{animation:popIn .55s cubic-bezier(.16,1,.3,1) forwards}
  @keyframes popIn{
    from{opacity:0;transform:translate(-50%,-50%) scale(.92)}
    to{opacity:1;transform:translate(-50%,-50%) scale(1)}
  }

  .card{
    width:34vmin;height:34vmin;
    border-radius:18px;
    background:#101214cc;
    backdrop-filter:blur(6px);
    display:grid;place-items:center;
    box-shadow:0 20px 40px rgba(0,0,0,.5), inset 0 0 0 2px rgba(255,255,255,.08);
  }
  .item-img{
    max-width:86%;max-height:86%;
    object-fit:contain;
  }
  .meta{color:#fff}
  .rarity-tag{
    display:inline-flex;align-items:center;gap:8px;
    padding:6px 12px;
    border-radius:999px;
    background:rgba(255,255,255,.1);
    border:1px solid rgba(255,255,255,.2);
    margin-bottom:8px;
  }
  .rarity-tag .dot{
    width:12px;height:12px;border-radius:50%;
    background:currentColor;
    box-shadow:0 0 10px currentColor;
  }

  .winner{
    font-weight:900;
    font-size: clamp(22px,2.6vw,44px);
    color:#fff;
    -webkit-text-stroke: 0.5px #000;
    text-shadow:
      0 0 2px rgba(0,0,0,.7),
      0 2px 0 #000,  2px 0 0 #000,
     -2px 0 0 #000,  0 -2px 0 #000,
      2px 2px 0 #000,-2px 2px 0 #000,
      2px -2px 0 #000,-2px -2px 0 #000;
  }
  .item{
    opacity:.95;
    font-size: clamp(18px,2vw,32px);
    color:#fff;
    -webkit-text-stroke: 1.5px #000;
    text-shadow:
      0 0 2px rgba(0,0,0,.7),
      0 2px 0 #000,  2px 0 0 #000,
     -2px 0 0 #000,  0 -2px 0 #000,
      2px 2px 0 #000,-2px 2px 0 #000,
      2px -2px 0 #000,-2px -2px 0 #000;
  }

  img:not([src]), img[src=""]{ display:none }
  img[data-hide="1"]{ display:none }
</style>
</head>
<body>
<div class="wrap">
  <div class="stage" id="stage">
    <div class="bg-img"></div>
    <div class="air"></div>

    <div class="land-dot" id="landDot"></div>
    <div class="contact" id="contact"></div>

    <div class="ball-wrap" id="ballWrap">
      <div class="ball" id="ball">
        <img class="top"    id="bTop"    src="assets/ball/ball_top.png"    alt="">
        <img class="bottom" id="bBottom" src="assets/ball/ball_bottom.png" alt="">
        <img class="button-ring" id="bRing" src="assets/ball/ball_bottom_ring.png" alt="">
        <img class="button-core" id="bCore" src="assets/ball/ball_bottom_core.png" alt="">
        <div class="rarity-glow" id="glow"></div>
      </div>
    </div>

    <div class="flash" id="flash"></div>
    <div class="particles" id="particles"></div>

    <div class="reveal" id="reveal">
      <div class="card"><img class="item-img" id="itemImg" alt="Premie"></div>
      <div class="meta">
        <div class="rarity-tag" id="rarityTag">
          <span class="dot" id="rarityDot"></span><span id="rarityText">Rarity</span>
        </div>
        <div class="winner" id="winnerText">Vinner</div>
        <div class="item" id="itemText">Premie</div>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  // üîó BACKEND-URL (Render)
  const API_BASE = "https://pokevenner-giveaway-backend.onrender.com";

  const $ = id => document.getElementById(id);
  const E = {
    stage: $('stage'),
    ballWrap: $('ballWrap'),
    ball: $('ball'),
    glow: $('glow'),
    flash: $('flash'),
    particles: $('particles'),
    reveal: $('reveal'),
    itemImg: $('itemImg'),
    winnerText: $('winnerText'),
    itemText: $('itemText'),
    rarityTag: $('rarityTag'),
    rarityDot: $('rarityDot'),
    rarityText: $('rarityText'),
    landDot: $('landDot'),
    contact: $('contact'),
    bTop: $('bTop'),
    bBottom: $('bBottom'),
    bRing: $('bRing'),
    bCore: $('bCore')
  };

  // --- Fiks ball_bottom_core fallback (space i filnavn) ---
  (function fixCore(){
    const trySrcs = ['assets/ball/ball_bottom_core.png','assets/ball/ball_bottom_core .png'];
    let i=0;
    const next=()=>{
      if(i>=trySrcs.length){E.bCore.setAttribute('data-hide','1');return;}
      const src=trySrcs[i++], img=new Image();
      img.onload=()=>{E.bCore.src=src;E.bCore.removeAttribute('data-hide');};
      img.onerror=next; img.src=src;
    };
    next();
    [E.bRing,E.bCore,E.bTop,E.bBottom].forEach(im=> im.onerror=()=>im.setAttribute('data-hide','1'));
  })();

  const getCss = v => getComputedStyle(document.documentElement).getPropertyValue(v).trim();
  const RAR = [
    { key: 'grey',   color: getCss('--grey'),   label: 'Common' },
    { key: 'green',  color: getCss('--green'),  label: 'Rare' },
    { key: 'blue',   color: getCss('--blue'),   label: 'Super Rare' },
    { key: 'gold',   color: getCss('--gold'),   label: 'Hyper Rare' },
    { key: 'purple', color: getCss('--purple'), label: 'Legendary' },
  ];
  const rInfo = k => RAR.find(r=>r.key===k) || RAR[0];
  const wait = ms => new Promise(res=>setTimeout(res, ms));

  // fallback-bilde per rarity (frontend)
  const rarityImageMap = {
    grey:   "assets/prizes/5xrandom.jpg",
    green:  "assets/prizes/2xrandomfullart.jpg",
    blue:   "assets/prizes/gengarstamped.jpg",
    gold:   "assets/prizes/megalopunnyex.jpg",
    purple: "assets/prizes/phantasmalflames.jpg",
  };

  function stageRect(){return E.stage.getBoundingClientRect();}
  function landingScreenPx(){
    const r = stageRect();
    let xPct = parseFloat(getCss('--land-x'));
    let yPct = parseFloat(getCss('--land-y'));
    const x = r.left + (xPct/100)*r.width;
    const y = r.top  + (yPct/100)*r.height;
    return {x,y};
  }
  function ballCenterLocal(){
    const b = E.ballWrap.getBoundingClientRect();
    const s = stageRect();
    return {x:b.left+b.width/2-s.left, y:b.top+b.height/2-s.top};
  }
  function cardCenterLocal(){
    const c = E.itemImg.closest('.card').getBoundingClientRect();
    const s = stageRect();
    return {x:c.left+c.width/2-s.left, y:c.top+c.height/2-s.top};
  }

  function wiggleLR(times=1,{amp=7,rot=5,dur=80}={}){
    return new Promise(async resolve=>{
      for(let i=0;i<times;i++){
        await new Promise(r=>{
          E.ballWrap.animate(
            [
              {transform:'translate(-50%,-50%) rotate(0)'},
              {transform:`translate(calc(-50% - ${amp}px), calc(-50% + ${Math.round(amp*0.7)}px)) rotate(${-rot}deg)`},
              {transform:`translate(calc(-50% + ${amp}px), calc(-50% - ${Math.round(amp*0.7)}px)) rotate(${rot}deg)`},
              {transform:'translate(-50%,-50%) rotate(0)'}
            ],
            {duration:dur*3,easing:'cubic-bezier(.36,.07,.19,.97)'}
          ).addEventListener('finish',r);
        });
      }
      resolve();
    });
  }

  function singleLeft({dx=10,dy=7,rot=-8,dur=170}={}){
    return new Promise(res=>{
      E.ballWrap.animate(
        [
          {transform:'translate(-50%,-50%)'},
          {transform:`translate(calc(-50% - ${dx}px), calc(-50% + ${dy}px)) rotate(${rot}deg)`},
          {transform:'translate(-50%,-50%)'}
        ],
        {duration:dur,easing:'cubic-bezier(.36,.07,.19,.97)'}
      ).addEventListener('finish',res);
    });
  }

  function burstSparks(n,colors,rmin,rmax){
    for(let i=0;i<n;i++){
      const s=document.createElement('div');
      s.className='spark';
      const a=Math.random()*Math.PI*2;
      const r=rmin+Math.random()*(rmax-rmin);
      s.style.setProperty('--x',(Math.cos(a)*r)+'vmin');
      s.style.setProperty('--y',(Math.sin(a)*r)+'vmin');
      s.style.left='var(--land-x)';
      s.style.top='calc(var(--land-y) + .5%)';
      s.style.background=colors[Math.floor(Math.random()*colors.length)];
      E.particles.appendChild(s);
      setTimeout(()=>s.remove(),1000);
    }
  }
  function confettiRainTop(n,palette){
    const rect=E.stage.getBoundingClientRect();
    for(let i=0;i<n;i++){
      const c=document.createElement('div');
      c.className='confetti';
      c.style.left=(Math.random()*rect.width)+'px';
      c.style.top='-8vh';
      c.style.background=palette[Math.floor(Math.random()*palette.length)];
      c.style.transform=`translateY(-6vh) rotate(${Math.random()*60-30}deg)`;
      c.style.animationDuration=(1600+Math.random()*900)+'ms';
      c.style.opacity=1;
      E.stage.appendChild(c);
      setTimeout(()=>c.remove(),2600);
    }
  }
  function radialBeams(n,palette){
    for(let i=0;i<n;i++){
      const b=document.createElement('div');
      b.className='beam';
      const angle=Math.random()*360;
      b.style.left='var(--land-x)';
      b.style.top='calc(var(--land-y) + .5%)';
      b.style.background=palette[Math.floor(Math.random()*palette.length)];
      b.style.transform=`translate(-50%,-100%) rotate(${angle}deg)`;
      E.particles.appendChild(b);
      setTimeout(()=>b.remove(),650);
    }
  }
  function shockRing(color='#fff'){
    const ring=document.createElement('div');
    ring.style.position='absolute';
    ring.style.left='var(--land-x)';
    ring.style.top='calc(var(--land-y) + .5%)';
    ring.style.width='2vmin';ring.style.height='2vmin';
    ring.style.border='3px solid '+color;
    ring.style.borderRadius='50%';
    ring.style.transform='translate(-50%,-50%) scale(0.2)';
    ring.style.opacity='0.9';
    ring.style.pointerEvents='none';
    E.particles.appendChild(ring);
    ring.animate(
      [
        {transform:'translate(-50%,-50%) scale(.2)',opacity:.9},
        {transform:'translate(-50%,-50%) scale(3.2)',opacity:0}
      ],
      {duration:700,easing:'cubic-bezier(.16,1,.3,1)'}
    ).addEventListener('finish',()=>ring.remove());
  }

  function burstTier(key,color){
    const flashStrength={grey:.35,green:.45,blue:.55,gold:.7,purple:.9}[key]||.5;
    E.flash.animate([{opacity:0},{opacity:flashStrength},{opacity:0}],{duration:420,easing:'ease-out'});
    const counts={grey:20,green:28,blue:36,gold:48,purple:64};
    if(key==='grey'){
      burstSparks(counts.grey,['#ffffff','#dfe3e6'],8,16);
    } else if(key==='green'){
      burstSparks(counts.green,[color],10,18);
    } else if(key==='blue'){
      burstSparks(counts.blue,[color],12,22);
    } else if(key==='gold'){
      burstSparks(counts.gold,[color,'#fff2b0'],14,24);
      confettiRainTop(70,['#f5c400','#fff','#ffe599']);
    } else if(key==='purple'){
      burstSparks(counts.purple,[color,'#ffffff'],16,28);
      radialBeams(14,[color,'#ffffff','#40c4ff','#ff4081']);
      confettiRainTop(120,['#a142f4','#34a853','#4285f4','#fbbc05','#ffffff']);
      shockRing('#ffffff');
    }
  }

  function flyPrizeToCard(){
    const imgSrc=E.itemImg.getAttribute('src')||'';
    if(!imgSrc){E.reveal.classList.add('in');return;}
    const fly=document.createElement('img');
    fly.className='prize-fly';
    fly.src=imgSrc;
    fly.onerror=()=>fly.setAttribute('data-hide','1');
    E.stage.appendChild(fly);
    const start=ballCenterLocal();
    fly.style.left=start.x+'px';
    fly.style.top=start.y+'px';
    const dest=cardCenterLocal();

    requestAnimationFrame(()=>{
      fly.style.transition='transform 200ms cubic-bezier(.16,1,.3,1), opacity 160ms ease-out';
      fly.style.opacity='1';
      fly.style.transform='translate(-50%, calc(-50% - 12px)) scale(.85)';
      setTimeout(()=>{
        const dx=dest.x-start.x, dy=dest.y-start.y;
        fly.style.transition='transform 540ms cubic-bezier(.17,.67,.28,1.2), opacity 260ms ease-in';
        fly.style.transform=`translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px)) scale(1.05)`;
        setTimeout(()=>{
          fly.remove();
          E.reveal.classList.add('in');
        },560);
      },200);
    });
  }

  function resetScene(){
    E.reveal.classList.remove('in');
    E.ball.classList.remove('open','unlock');
    E.glow.style.opacity=0;
  }

  function openSequence(final){
    E.rarityText.textContent = final.label;
    E.rarityTag.style.color = final.color;
    E.rarityTag.style.borderColor = final.color + '66';
    E.rarityTag.style.boxShadow = `0 0 14px ${final.color}55 inset`;

    E.glow.style.background = `radial-gradient(circle, ${final.color} 0%, transparent 65%)`;
    E.glow.style.opacity = .7;

    const cfg = ({
      grey:{top:-112,bot:-8,dur:520},
      green:{top:-118,bot:-9,dur:520},
      blue:{top:-124,bot:-10,dur:500},
      gold:{top:-130,bot:-11,dur:480},
      purple:{top:-136,bot:-12,dur:460},
    })[final.key] || {top:-112,bot:-8,dur:520};

    E.ball.style.setProperty('--open-top',cfg.top+'deg');
    E.ball.style.setProperty('--open-bot',cfg.bot+'deg');
    E.ball.style.setProperty('--open-dur',cfg.dur+'ms');

    burstTier(final.key, final.color);

    E.ball.classList.add('unlock');
    setTimeout(()=>E.ball.classList.add('open'),120);
    setTimeout(()=>flyPrizeToCard(),260);
  }

  function rarityCycle(finalKey,onLock){
    const cycle=['grey','green','blue'];
    const setColor=(key)=>{
      const info=rInfo(key);
      E.glow.style.background=`radial-gradient(circle, ${info.color} 0%, transparent 65%)`;
      E.glow.style.opacity=.6;
    };
    setColor(cycle[0]);
    wiggleLR(2,{amp:7,rot:5,dur:80})
      .then(()=>wait(700))
      .then(()=>{setColor(cycle[1]);return wiggleLR(2,{amp:7,rot:5,dur:80});})
      .then(()=>wait(700))
      .then(()=>{setColor(cycle[2]);return singleLeft({dx:10,dy:7,rot:-8,dur:170});})
      .then(()=>onLock());
  }

  function beginThrowThenOpen({winner,item,img,rarity}){
    resetScene();

    const rKey = (rarity || 'grey').toLowerCase();
    const finalR = rInfo(rKey);

    E.winnerText.textContent = winner || 'Vinner';
    E.itemText.textContent   = item   || 'Mystery Prize';

    // backend-bilde ‚Üí hvis tom ‚Üí fallback basert p√• rarity
    let finalImg = img;
    if (!finalImg && rarityImageMap[rKey]) {
      finalImg = rarityImageMap[rKey];
    }

    if (finalImg) {
      E.itemImg.src = finalImg;
    } else {
      E.itemImg.removeAttribute('src');
    }

    E.contact.animate(
      [{opacity:0},{opacity:1}],
      {duration:900,delay:500,fill:'forwards'}
    );

    const land = landingScreenPx();
    const start = {x:window.innerWidth+160, y:window.innerHeight*0.18};
    const c1 = {x:land.x-420, y:land.y-460};
    const c2 = {x:land.x-160, y:land.y-140};
    const path=`M ${start.x} ${start.y} C ${c1.x} ${c1.y}, ${c2.x} ${c2.y}, ${land.x} ${land.y}`;

    E.ballWrap.style.offsetPath=`path('${path}')`;
    E.ballWrap.style.offsetDistance='0%';

    const anim = E.ballWrap.animate(
      [
        {offsetDistance:'0%', transform:'translate(-50%,-50%) rotate(-50deg)'},
        {offsetDistance:'60%',transform:'translate(-50%,-50%) rotate(15deg)'},
        {offsetDistance:'100%',transform:'translate(-50%,-50%) rotate(0deg)'}
      ],
      {duration:1120,easing:'cubic-bezier(.17,.67,.28,1.2)',fill:'forwards'}
    );

    anim.addEventListener('finish',()=>{
      E.ballWrap.animate(
        [
          {transform:'translate(-50%,-50%)'},
          {transform:'translate(calc(-50% - 6px), calc(-50% + 5px))'},
          {transform:'translate(-50%,-50%)'}
        ],
        {duration:240,easing:'cubic-bezier(.36,.07,.19,.97)'}
      );

      rarityCycle(finalR.key, ()=>openSequence(finalR));
    });
  }

  async function runDrawFromStoredCode() {
    const stored = (localStorage.getItem("pv_bonus_code") || "").trim().toUpperCase();

    if (!stored) {
      E.winnerText.textContent = "Ingen kode funnet";
      E.itemText.textContent = "G√• tilbake og skriv inn bonuskoden f√∏rst.";
      E.reveal.classList.add("in");
      return;
    }

    try{
      const res = await fetch(API_BASE + "/api/redeem", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ code: stored })
      });

      const data = await res.json().catch(()=> ({}));

      if (!res.ok || data.error){
        E.winnerText.textContent = "Feil med koden";
        E.itemText.textContent = data.error || "Ugyldig kode.";
        E.reveal.classList.add("in");
        return;
      }

      await wait(400);

      beginThrowThenOpen({
        winner: data.winner || ("Kode " + stored),
        item: data.item || "Mystery Prize",
        img: data.img || "",
        rarity: data.rarity || "grey"
      });

    }catch(err){
      console.error(err);
      E.winnerText.textContent = "Teknisk feil";
      E.itemText.textContent = "Pr√∏v igjen om litt.";
      E.reveal.classList.add("in");
    }finally{
      localStorage.removeItem("pv_bonus_code");
    }
  }

  runDrawFromStoredCode();

})();
</script>
</body>
</html>
